{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "session-list-1",
  "type": "registry:block",
  "title": "Session List - 1",
  "description": "A simple session management component.",
  "dependencies": [
    "lucide-react",
    "@clerk/nextjs",
    "date-fns"
  ],
  "registryDependencies": [
    "card",
    "scroll-area",
    "alert-dialog",
    "table",
    "badge",
    "button",
    "skeleton",
    "dropdown-menu",
    "sonner"
  ],
  "files": [
    {
      "path": "registry/blocks/session-list/session-list-1/index.tsx",
      "content": "import { Card, CardContent, CardTitle } from \"@/components/ui/card\";\nimport { ScrollArea, ScrollBar } from \"@/components/ui/scroll-area\";\nimport { Session } from \"@clerk/nextjs/server\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Laptop, Smartphone } from \"lucide-react\";\nimport { formatTimestamp } from \"@/registry/lib/format-timestamp\";\nimport { SessionRevokeForm } from \"./session-revoke-form\";\nimport { fetchSessions } from \"./fetchers\";\n\ntype SessionList1Props = {\n  sessions?: Partial<Session>[] | null;\n};\n\nexport default function SessionList1({ sessions }: SessionList1Props) {\n  if (sessions) {\n    return <SessionList1Inner sessions={sessions} />;\n  }\n\n  return <SessionList1WithClerk />;\n}\n\nasync function SessionList1WithClerk() {\n  const sessions = await fetchSessions();\n\n  if (!sessions || sessions.length === 0) return <p>No sessions found.</p>;\n\n  return <SessionList1Inner sessions={sessions} />;\n}\n\nfunction SessionList1Inner({ sessions }: { sessions: Partial<Session>[] }) {\n  return (\n    <Card className=\"w-full p-3\">\n      <CardContent className=\"flex flex-col gap-y-4 p-5\">\n        <CardTitle>Sessions</CardTitle>\n        <ScrollArea>\n          <Table className=\"mb-3\">\n            <TableHeader>\n              <TableRow>\n                <TableHead>Device</TableHead>\n                <TableHead>Detail</TableHead>\n                <TableHead>Last Seen</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {sessions.map((s) => (\n                <TableRow key={s.id}>\n                  <TableCell className=\"flex flex-row gap-2 items-center justify-between\">\n                    {s.latestActivity?.isMobile == true ? (\n                      <Smartphone className=\"size-8 stroke-muted-foreground\" />\n                    ) : (\n                      <Laptop className=\"size-8 stroke-muted-foreground\" />\n                    )}\n\n                    <div className=\"flex flex-col w-full text-start font-medium gap-0.5\">\n                      <div className=\"flex flex-row w-full gap-1.5 items-center justify-start\">\n                        <p className=\"font-semibold\">\n                          {s.latestActivity?.deviceType}\n                        </p>\n                        {s.status == \"active\" && (\n                          <Badge className=\"font-bold text-[0.6rem] bg-green-50 text-green-700 dark:bg-green-900/15 dark:text-green-400 dark:border-green-200/15\">\n                            Active\n                          </Badge>\n                        )}\n                      </div>\n\n                      <p className=\"text-xs text-muted-foreground\">\n                        {s.latestActivity?.browserName}{\" \"}\n                        {s.latestActivity?.browserVersion}\n                      </p>\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"text-muted-foreground\">\n                    {`${s.latestActivity?.ipAddress} (${s.latestActivity?.city})`}\n                  </TableCell>\n                  <TableCell className=\"text-muted-foreground\">\n                    {formatTimestamp(s.updatedAt!)}\n                  </TableCell>\n                  <TableCell className=\"text-right\">\n                    <SessionRevokeForm sessionId={s.id!} />\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          <ScrollBar orientation=\"horizontal\" />\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/session-list-1/index.tsx"
    },
    {
      "path": "registry/blocks/session-list/session-list-1/actions.ts",
      "content": "\"use server\";\n\nimport { auth, clerkClient } from \"@clerk/nextjs/server\";\nimport { revalidatePath } from \"next/cache\";\n\nexport async function revokeSession(sessionId: string) {\n  const { userId } = await auth();\n\n  if (!userId) {\n    throw new Error(\"Failed to revoke session\");\n  }\n\n  const client = await clerkClient();\n  await client.sessions.revokeSession(sessionId);\n\n  revalidatePath(\"/\");\n}\n",
      "type": "registry:component",
      "target": "components/session-list-1/actions.ts"
    },
    {
      "path": "registry/blocks/session-list/session-list-1/fetchers.ts",
      "content": "import { clerkClient, auth, Session } from \"@clerk/nextjs/server\";\n\nexport async function fetchSessions() {\n  const { userId } = await auth();\n\n  if (!userId) {\n    throw new Error(\"Failed to retrieve email addresses\");\n  }\n\n  const client = await clerkClient();\n  const sessions: Session[] = (\n    await client.sessions.getSessionList({ userId, status: \"active\" })\n  ).data;\n\n  return sessions;\n}\n",
      "type": "registry:component",
      "target": "components/session-list-1/fetchers.ts"
    },
    {
      "path": "registry/blocks/session-list/session-list-1/session-revoke-form.tsx",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { MoreHorizontalIcon } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { revokeSession } from \"./actions\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { toast } from \"sonner\";\nimport { useAuth } from \"@clerk/nextjs\";\n\nexport function SessionRevokeForm({ sessionId }: { sessionId: string }) {\n  const { isSignedIn } = useAuth();\n  const [showRevokeDialog, setShowRevokeDialog] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  async function handleRevoke() {\n    if (!isSignedIn) {\n      toast.warning(\"You must be logged in to use this functionality.\");\n    } else {\n      try {\n        await revokeSession(sessionId);\n        toast.success(\"Session revoked successfully.\");\n      } catch (err) {\n        console.error(err);\n        toast.error(\"Failed to revoke session.\");\n      } finally {\n        setLoading(false);\n      }\n    }\n  }\n\n  return (\n    <>\n      <DropdownMenu modal={false}>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"outline\" aria-label=\"Open menu\" size=\"icon-sm\">\n            <MoreHorizontalIcon />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent className=\"w-40\" align=\"end\">\n          <DropdownMenuLabel>Session Actions</DropdownMenuLabel>\n          <DropdownMenuSeparator />\n          <DropdownMenuGroup>\n            <DropdownMenuItem\n              variant=\"destructive\"\n              onSelect={() => setShowRevokeDialog(true)}\n            >\n              Revoke\n            </DropdownMenuItem>\n          </DropdownMenuGroup>\n        </DropdownMenuContent>\n      </DropdownMenu>\n      <AlertDialog open={showRevokeDialog} onOpenChange={setShowRevokeDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Sign out this device?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This device will be logged out immediately.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction asChild>\n              <Button onClick={handleRevoke} disabled={loading}>\n                {loading ? \"Revoking...\" : \"Confirm\"}\n              </Button>\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/session-list-1/session-revoke-form.tsx"
    },
    {
      "path": "registry/lib/format-timestamp.ts",
      "content": "import { format, isToday, isYesterday } from \"date-fns\";\n\nexport function formatTimestamp(ts: number) {\n  const date = new Date(ts);\n  if (isToday(date)) return `Today at ${format(date, \"h:mm a\")}`;\n  if (isYesterday(date)) return `Yesterday at ${format(date, \"h:mm a\")}`;\n  return format(date, \"MMM d, yyyy 'at' h:mm a\");\n}\n",
      "type": "registry:lib"
    }
  ]
}